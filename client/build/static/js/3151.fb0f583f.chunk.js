"use strict";(self.webpackChunkSpellEng=self.webpackChunkSpellEng||[]).push([[3151],{59414:(e,a,t)=>{t.d(a,{A:()=>l});t(65043);var s=t(69189),o=(t(66097),t(70579));const l=e=>{let{onChange:a,date:t}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(s.Ay,{tileDisabled:e=>{let{date:a}=e;return a<(new Date).setHours(0,0,0,0)},onChange:a,value:t})})}},93884:(e,a,t)=>{t.d(a,{$p:()=>l,C9:()=>o});var s=t(22019);const o=e=>{s.Ay.success({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})},l=e=>{s.Ay.error({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})}},12408:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(86213),o=t(86178),l=t.n(o),n=t(65043),c=t(60184),i=t(31103),m=t(59414),r=t(93884),d=t(70579);const p=()=>{const[e,a]=(0,n.useState)(new Date),[t,o]=(0,n.useState)([]),[p,u]=(0,n.useState)({}),h=async()=>{var e;await s.A.get("".concat("https://www.spelleng.com/api","/users/user/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id)).then((e=>{200===e.status?u(e.data):(0,r.$p)(e.data.errorMessage)})).catch((e=>{console.log(e),(0,r.$p)(null===e||void 0===e?void 0:e.message)}))},v=a=>{const t=l()("".concat(l()(e).format("YYYY/MM/DD")," ").concat(a.split(" - ")[0]),"YYYY/MM/DD h:mm a").toISOString();(async(e,a)=>{try{var t,o;const l=await s.A.post("".concat("https://www.spelleng.com/api","/scheduled-classes/create-meeting"),{startTime:a,email:null===(t=(0,i.wR)())||void 0===t?void 0:t.email,timezone:null===(o=(0,i.wR)())||void 0===o?void 0:o.timezone});200===l.status?M(e,l.data.meetingLink):(0,r.$p)(l.data.errorMessage)}catch(l){(0,r.$p)(l.message)}})(a,t)},g=async a=>{var t;await s.A.put("".concat("https://www.spelleng.com/api","/scheduled-classes/delete-class-and-availability/").concat(null===(t=(0,i.wR)())||void 0===t?void 0:t._id),{date:l()(e).format("DD/MM/YYYY"),time:a},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{200===e.status?((0,r.C9)(e.data.successMessage),h()):(0,r.$p)(e.data.errorMessage)})).catch((e=>{console.log(e),(0,r.$p)(null===e||void 0===e?void 0:e.message)}))},w=async e=>{var a;const t=await(null===p||void 0===p||null===(a=p.availability)||void 0===a?void 0:a.filter((a=>(null===a||void 0===a?void 0:a.date)===e)));o(t)},Y=["8:00am - 8:30am","8:40am - 9:10am","9:20am - 9:50am","10:00am - 10:30am","10:40am - 11:10am","11:20am - 11:50am","12:00pm - 12:30pm","12:40pm - 1:10pm","1:20pm - 1:50pm","2:00pm - 2:30pm","2:40pm - 3:10pm","3:20pm - 3:50pm","4:00pm - 4:30pm","4:40pm - 5:10pm","5:20pm - 5:50pm","6:00pm - 6:30pm","6:40pm - 7:10pm","7:20pm - 7:50pm","8:00pm - 8:30pm","8:40pm - 9:10pm","9:20pm - 9:50pm","10:00pm - 10:30pm","10:30pm - 11:00pm"],M=async(a,t)=>{var o;await s.A.post("".concat("https://www.spelleng.com/api","/scheduled-classes/add"),{tutor:null===(o=(0,i.wR)())||void 0===o?void 0:o._id,date:l()(e).format("DD/MM/YYYY"),time:a,meetingUrl:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((t=>{200===t.status?((0,r.C9)(t.data.successMessage),(async a=>{await s.A.put("".concat("https://www.spelleng.com/api","/users/tutors/add/time-slot"),{date:l()(e).format("DD/MM/YYYY"),time:a},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{200===e.status?((0,r.C9)(e.data.successMessage),h()):(0,r.$p)(e.data.errorMessage)})).catch((e=>{console.log(e),(0,r.$p)(null===e||void 0===e?void 0:e.message)}))})(a)):(0,r.$p)(t.data.errorMessage)})).catch((e=>{console.log(e),(0,r.$p)(null===e||void 0===e?void 0:e.message)}))};return(0,n.useEffect)((()=>(h(),()=>{})),[]),(0,n.useEffect)((()=>(p&&w(l()(new Date).format("DD/MM/YYYY")),()=>{})),[p]),console.log(t),(0,d.jsx)("div",{className:"Availability",children:(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("div",{className:"text-end",children:(0,d.jsx)("a",{className:"btn ant-btn-primary",target:"_blank",href:"".concat("https://www.spelleng.com/api","/auth/authorize"),children:"Authorize Zoom"})}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"clockSide col-md-4 my-4",children:(0,d.jsx)(m.A,{date:e,onChange:e=>{a(e),w(l()(e).format("DD/MM/YYYY"))}})}),(0,d.jsxs)("div",{className:"timeSelect col-md-8",children:[(0,d.jsxs)("p",{className:"d-flex gap-2 mb-4",children:[l()(e).format("Do MMMM, YYYY")," ",(0,d.jsx)("b",{children:"Please select your time slot from following:"})]}),(0,d.jsx)("div",{className:"items",children:null===Y||void 0===Y?void 0:Y.map(((a,o)=>{const n=null===t||void 0===t?void 0:t.some((e=>(null===e||void 0===e?void 0:e.time)===a));return(0,d.jsxs)("div",{className:"item",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(c.w_X,{}),(0,d.jsx)("span",{children:a})]}),(0,d.jsx)("div",{className:"buttons",children:n?(0,d.jsx)("button",{className:"btn removeBtn",onClick:()=>(async a=>{await s.A.put("".concat("https://www.spelleng.com/api","/users/tutors/remove/time-slot"),{date:l()(e).format("DD/MM/YYYY"),time:a},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{200===e.status?((0,r.C9)(e.data.successMessage),g(a)):(0,r.$p)(e.data.errorMessage)})).catch((e=>{console.log(e),(0,r.$p)(null===e||void 0===e?void 0:e.message)}))})(a),children:"REMOVE"}):(0,d.jsx)("button",{className:"btn",onClick:()=>v(a),children:"ADD"})})]},o)}))})]})]})]})})}}}]);
//# sourceMappingURL=3151.fb0f583f.chunk.js.map