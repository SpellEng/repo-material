"use strict";(self.webpackChunkSpellEng=self.webpackChunkSpellEng||[]).push([[2605],{93884:(e,t,n)=>{n.d(t,{$p:()=>l,C9:()=>a});var s=n(22019);const a=e=>{s.Ay.success({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})},l=e=>{s.Ay.error({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})}},84422:(e,t,n)=>{n.d(t,{A:()=>I});var s=n(65043),a=n(89073),l=n(98139),r=n.n(l),o=n(18574),c=n(15315),i=n(35296),d=n(51020),u=n(78365);const v=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],m=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];const g=function(e,t){return r()(Object.assign(Object.assign(Object.assign({},((e,t)=>{const n=!0===t.wrap?"wrap":t.wrap;return{["".concat(e,"-wrap-").concat(n)]:n&&v.includes(n)}})(e,t)),((e,t)=>{const n={};return m.forEach((s=>{n["".concat(e,"-align-").concat(s)]=t.align===s})),n["".concat(e,"-align-stretch")]=!t.align&&!!t.vertical,n})(e,t)),((e,t)=>{const n={};return p.forEach((s=>{n["".concat(e,"-justify-").concat(s)]=t.justify===s})),n})(e,t)))},h=e=>{const{componentCls:t}=e;return{[t]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},f=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},x=e=>{const{componentCls:t}=e,n={};return v.forEach((e=>{n["".concat(t,"-wrap-").concat(e)]={flexWrap:e}})),n},j=e=>{const{componentCls:t}=e,n={};return m.forEach((e=>{n["".concat(t,"-align-").concat(e)]={alignItems:e}})),n},y=e=>{const{componentCls:t}=e,n={};return p.forEach((e=>{n["".concat(t,"-justify-").concat(e)]={justifyContent:e}})),n},w=(0,d.OF)("Flex",(e=>{const{paddingXS:t,padding:n,paddingLG:s}=e,a=(0,u.h1)(e,{flexGapSM:t,flexGap:n,flexGapLG:s});return[h(a),f(a),x(a),j(a),y(a)]}),(()=>({})),{resetStyle:!1});var b=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n};const A=s.forwardRef(((e,t)=>{const{prefixCls:n,rootClassName:a,className:l,style:d,flex:u,gap:v,children:p,vertical:m=!1,component:h="div"}=e,f=b(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:x,direction:j,getPrefixCls:y}=s.useContext(i.QO),A=y("flex",n),[C,O,N]=w(A),S=null!==m&&void 0!==m?m:null===x||void 0===x?void 0:x.vertical,k=r()(l,a,null===x||void 0===x?void 0:x.className,A,O,N,g(A,e),{["".concat(A,"-rtl")]:"rtl"===j,["".concat(A,"-gap-").concat(v)]:(0,c.X)(v),["".concat(A,"-vertical")]:S}),M=Object.assign(Object.assign({},null===x||void 0===x?void 0:x.style),d);return u&&(M.flex=u),v&&!(0,c.X)(v)&&(M.gap=v),C(s.createElement(h,Object.assign({ref:t,className:k,style:M},(0,o.A)(f,["justify","wrap","align"])),p))}));const C=A;var O=n(2761),N=n(87021),S=n(89698),k=n(86178),M=n.n(k),E=n(73216),R=n(70579);const I=e=>{var t;let{meetingUrl:n,type:s,removeScheduledClass:l,isTutor:r,id:o,studentId:c,tutor:i,date:d,time:u,isUpcoming:v,tutorLayout:p,recording:m}=e;const g=(0,E.Zp)(),h=()=>{const e=M()(),t=M()("".concat(d," ").concat(u.split(" - ")[0]),"DD/MM/YYYY h:mm a"),n=M()("".concat(d," ").concat(u.split(" - ")[1]),"DD/MM/YYYY h:mm a");return e.isBetween(t,n,null,"[)")};return(0,R.jsxs)(a.A,{className:"SessionCard",children:[(0,R.jsxs)("div",{className:"sessionHeader",children:[(0,R.jsxs)(C,{gap:"10px",align:"center",children:[(0,R.jsx)(O.A,{size:48,icon:(0,R.jsx)("img",{src:null===i||void 0===i||null===(t=i.picture)||void 0===t?void 0:t.url})}),(0,R.jsxs)("span",{className:"name",children:[s,": ",(0,R.jsx)("b",{children:null===i||void 0===i?void 0:i.fullName})]})]}),!v&&r&&(0,R.jsxs)("button",{className:"btn p-0",onClick:()=>g("/chats?receiver=".concat(c)),children:[(0,R.jsx)(S.Oz0,{}),(0,R.jsx)("br",{}),(0,R.jsx)("small",{children:"Message Me"})]})]}),(0,R.jsxs)(C,{justify:"space-between",className:"my-2",align:"center",children:[(0,R.jsxs)("div",{className:"text-start",children:[(0,R.jsx)("small",{children:"Date:"}),(0,R.jsx)("h6",{children:d})]}),(0,R.jsxs)("div",{className:"text-end",children:[(0,R.jsx)("small",{children:"Time:"}),(0,R.jsx)("h6",{children:u})]})]}),(0,R.jsx)(C,{gap:"19px",justify:"space-between",align:"center",className:"sessionActions mt-3",children:v?(0,R.jsxs)("div",{className:"w-100",children:[(0,R.jsxs)(C,{className:"sessionBtns",gap:"10px",justify:"space-between",align:"center",children:[(0,R.jsx)(N.Ay,{type:"primary",disabled:h(),danger:!0,onClick:()=>l(o,d,u),children:"Cancel"}),(0,R.jsx)(N.Ay,{type:"primary",disabled:!h(),onClick:()=>{return e=n,void window.open(e,"_blank","noopener,noreferrer");var e},children:"Join"})]}),(0,R.jsx)("p",{children:"Only 3 classes can be cancelled every month 2 hours before the class"})]}):null})]})}},73063:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var s=n(65043),a=n(47419),l=n(11645),r=n(26029),o=n(18489),c=n(84422),i=n(31103),d=n(93884),u=n(86213),v=n(86178),p=n.n(v),m=n(15444),g=n(89593),h=n(87021),f=n(70579);const{TextArea:x}=m.A,j=e=>{var t;let{previousClass:n,updateParent:a}=e;const[l,r]=(0,s.useState)(""),[o,c]=(0,s.useState)(5);return(0,f.jsx)("div",{className:"LeaveAReview mt-3",children:(0,f.jsxs)("div",{children:[(0,f.jsxs)("h4",{className:"mb-1",children:["How was your last class experience with ",null===n||void 0===n||null===(t=n.tutor)||void 0===t?void 0:t.fullName,"?"]}),(0,f.jsxs)("p",{className:"mb-4",children:["You attended this class on ",null===n||void 0===n?void 0:n.date," at ",null===n||void 0===n?void 0:n.time]}),(0,f.jsx)(g.A,{allowHalf:!0,onChange:e=>{c(e)},value:o}),(0,f.jsx)(x,{rows:4,value:l,onChange:e=>{r(e.target.value)},placeholder:"Write your review here",className:"my-3"}),(0,f.jsx)(h.Ay,{type:"primary",onClick:async()=>{var e;await u.A.put("".concat("https://www.spelleng.com/api","/scheduled-classes/add-review"),{classId:null===n||void 0===n?void 0:n._id,userId:null===(e=(0,i.wR)())||void 0===e?void 0:e._id,message:l,rating:o},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{200===e.status?((0,d.C9)(e.data.successMessage),r(""),c([0]),a()):(0,d.$p)(e.data.errorMessage)})).catch((e=>{console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))},disabled:!l||!o,children:"Submit"})]})})},y=()=>{const[e,t]=(0,s.useState)(!1),[n,v]=(0,s.useState)(""),[m,g]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[y,w]=(0,s.useState)(!1),[b,A]=(0,s.useState)({}),[C,O]=(0,s.useState)({}),N=()=>{w(!1)},S=async()=>{var e;await u.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/future/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{t(!1),200===e.status?g(e.data):(0,d.$p)(e.data.errorMessage)})).catch((e=>{t(!1),console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))},k=async()=>{var e;await u.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/past/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{if(t(!1),200===e.status){var n;x(e.data);let t=null===(n=e.data)||void 0===n?void 0:n.find((e=>!(null!==e&&void 0!==e&&e.review)));console.log(t),t&&(setTimeout((()=>{w(!0)}),1e3),A(t))}else(0,d.$p)(e.data.errorMessage)})).catch((e=>{t(!1),console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))},M=async(e,t,n)=>{await u.A.put("".concat("https://www.spelleng.com/api","/scheduled-classes/cancel-and-reschedule/").concat(e),{student:!0,date:p()(n).format("DD/MM/YYYY"),time:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{200===e.status?((0,d.C9)(e.data.successMessage),S()):(0,d.$p)(e.data.errorMessage)})).catch((e=>{console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))};(0,s.useEffect)((()=>(S(),k(),(async()=>{var e;await u.A.get("".concat("https://www.spelleng.com/api","/users/user/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{t(!1),200===e.status?O(e.data):(0,d.$p)(e.data.errorMessage)})).catch((e=>{t(!1),console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))})(),()=>{})),[]);const E=[{key:"1",label:"Upcoming Classes",children:(0,f.jsx)(a.A,{gutter:[23,23],children:null===m||void 0===m?void 0:m.map(((e,t)=>(0,f.jsx)(l.A,{xs:24,md:12,lg:8,children:(0,f.jsx)(c.A,{id:null===e||void 0===e?void 0:e._id,tutor:null===e||void 0===e?void 0:e.tutor,date:null===e||void 0===e?void 0:e.date,time:null===e||void 0===e?void 0:e.time,isUpcoming:!0,meetingUrl:null===e||void 0===e?void 0:e.meetingUrl,type:"Tutor",removeScheduledClass:M},t)})))})},{key:"2",label:"Previous Classes",children:(0,f.jsx)(a.A,{gutter:[23,23],children:null===h||void 0===h?void 0:h.map(((e,t)=>(0,f.jsx)(l.A,{xs:24,md:12,lg:8,children:(0,f.jsx)(c.A,{id:null===e||void 0===e?void 0:e._id,tutor:null===e||void 0===e?void 0:e.tutor,date:null===e||void 0===e?void 0:e.date,time:null===e||void 0===e?void 0:e.time,isUpcoming:!1,type:"Tutor"},t)})))})}];return(0,f.jsxs)("div",{className:"UpcomingStudent",children:[(0,f.jsx)(r.A,{destroyOnClose:!0,title:"Leave a Review",footer:!1,open:y,onCancel:N,children:(0,f.jsx)(j,{previousClass:b,updateParent:N})}),(0,f.jsxs)("div",{className:"container",children:["2"===n&&(null===C||void 0===C?void 0:C.recording)&&(0,f.jsx)("a",{href:null===C||void 0===C?void 0:C.recording,className:"downloadBtn",target:"_blank",children:"Download Recordings"}),(0,f.jsx)(o.A,{defaultActiveKey:"1",onChange:e=>{v(e),"1"===e?S():"2"===e&&k()},items:E})]})]})}},38046:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(65043),a=n(8566),l=n(87021),r=n(64160);function o(e){return!(!e||!e.then)}const c=e=>{const{type:t,children:n,prefixCls:c,buttonProps:i,close:d,autoFocus:u,emitEvent:v,isSilent:p,quitOnNullishReturnValue:m,actionFn:g}=e,h=s.useRef(!1),f=s.useRef(null),[x,j]=(0,a.A)(!1),y=function(){null===d||void 0===d||d.apply(void 0,arguments)};s.useEffect((()=>{let e=null;return u&&(e=setTimeout((()=>{var e;null===(e=f.current)||void 0===e||e.focus()}))),()=>{e&&clearTimeout(e)}}),[]);return s.createElement(l.Ay,Object.assign({},(0,r.DU)(t),{onClick:e=>{if(h.current)return;if(h.current=!0,!g)return void y();let t;if(v){if(t=g(e),m&&!o(t))return h.current=!1,void y(e)}else if(g.length)t=g(d),h.current=!1;else if(t=g(),!o(t))return void y();(e=>{o(e)&&(j(!0),e.then((function(){j(!1,!0),y.apply(void 0,arguments),h.current=!1}),(e=>{if(j(!1,!0),h.current=!1,!(null===p||void 0===p?void 0:p()))return Promise.reject(e)})))})(t)},loading:x,prefixCls:c},i,{ref:f}),n)}},29854:(e,t,n)=>{n.d(t,{A:()=>c,U:()=>o});var s=n(65043),a=n(28678),l=n(58732),r=n(35296);function o(e){return t=>s.createElement(l.Ay,{theme:{token:{motion:!1,zIndexPopupBase:0}}},s.createElement(e,Object.assign({},t)))}const c=(e,t,n,l)=>o((o=>{const{prefixCls:c,style:i}=o,d=s.useRef(null),[u,v]=s.useState(0),[p,m]=s.useState(0),[g,h]=(0,a.A)(!1,{value:o.open}),{getPrefixCls:f}=s.useContext(r.QO),x=f(t||"select",c);s.useEffect((()=>{if(h(!0),"undefined"!==typeof ResizeObserver){const e=new ResizeObserver((e=>{const t=e[0].target;v(t.offsetHeight+8),m(t.offsetWidth)})),t=setInterval((()=>{var s;const a=n?".".concat(n(x)):".".concat(x,"-dropdown"),l=null===(s=d.current)||void 0===s?void 0:s.querySelector(a);l&&(clearInterval(t),e.observe(l))}),10);return()=>{clearInterval(t),e.disconnect()}}}),[]);let j=Object.assign(Object.assign({},o),{style:Object.assign(Object.assign({},i),{margin:0}),open:g,visible:g,getPopupContainer:()=>d.current});l&&(j=l(j));const y={paddingBottom:u,position:"relative",minWidth:p};return s.createElement("div",{ref:d,style:y},s.createElement(e,Object.assign({},j)))}))},15315:(e,t,n)=>{function s(e){return["small","middle","large"].includes(e)}function a(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}n.d(t,{X:()=>s,m:()=>a})},44210:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(65043);function a(){const[,e]=s.useReducer((e=>e+1),0);return e}},99598:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(65043),a=n(52664),l=n(44210),r=n(44320);const o=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,s.useRef)({}),n=(0,l.A)(),o=(0,r.Ay)();return(0,a.A)((()=>{const s=o.subscribe((s=>{t.current=s,e&&n()}));return()=>o.unsubscribe(s)}),[]),t.current}},10370:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(65043),a=n(45012),l=n(76970);const r=(e,t)=>{const n=s.useContext(a.A);return[s.useMemo((()=>{var s;const a=t||l.A[e],r=null!==(s=null===n||void 0===n?void 0:n[e])&&void 0!==s?s:{};return Object.assign(Object.assign({},"function"===typeof a?a():a),r||{})}),[e,t,n]),s.useMemo((()=>{const e=null===n||void 0===n?void 0:n.locale;return(null===n||void 0===n?void 0:n.exist)&&!e?l.A.locale:e}),[n])]}}}]);
//# sourceMappingURL=2605.85e92005.chunk.js.map