"use strict";(self.webpackChunkspelleng=self.webpackChunkspelleng||[]).push([[7344],{93884:(e,s,a)=>{a.d(s,{$p:()=>c,C9:()=>n});var t=a(22019);const n=e=>{t.Ay.success({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})},c=e=>{t.Ay.error({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})}},76068:(e,s,a)=>{a.d(s,{A:()=>j});var t=a(47419),n=a(11645),c=(a(65043),a(73216)),i=a(35475),d=a(31103),l=a(23658),o=a(5657),r=a(6873),m=a(67488),h=a(9493),u=a(6720),x=a(70579);const p=()=>{const e=(0,c.zy)();return(0,x.jsx)("div",{className:"AdminSidebar py-4",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"mt-8 relative",children:[(0,x.jsx)("div",{children:(0,x.jsx)(i.N_,{to:"/admin/dashboard",children:(0,x.jsxs)("button",{className:"btn ".concat("/admin/dashboard"===e.pathname?"activeLink":""),children:[(0,x.jsx)(l.A,{}),(0,x.jsx)("span",{children:"Dashboard"})]})})}),(0,x.jsx)("div",{children:(0,x.jsx)(i.N_,{to:"/admin/students",children:(0,x.jsxs)("button",{className:"btn ".concat("/admin/students"===e.pathname?"activeLink":""),children:[(0,x.jsx)(o.A,{}),(0,x.jsx)("span",{children:"Students"})]})})}),(0,x.jsx)("div",{children:(0,x.jsx)(i.N_,{to:"/admin/tutors",children:(0,x.jsxs)("button",{className:"btn ".concat("/admin/tutors"===e.pathname?"activeLink":""),children:[(0,x.jsx)(r.A,{}),(0,x.jsx)("span",{children:"Tutors"})]})})}),(0,x.jsx)("div",{children:(0,x.jsx)(i.N_,{to:"/admin/classes",children:(0,x.jsxs)("button",{className:"btn ".concat("/admin/classes"===e.pathname?"activeLink":""),children:[(0,x.jsx)(m.A,{}),(0,x.jsx)("span",{children:"Classes"})]})})}),(0,x.jsx)("div",{children:(0,x.jsx)(i.N_,{to:"/admin/coupons",children:(0,x.jsxs)("button",{className:"btn ".concat("/admin/coupons"===e.pathname?"activeLink":""),children:[(0,x.jsx)(u.VXP,{}),(0,x.jsx)("span",{children:"Coupons"})]})})})]}),(0,x.jsx)("div",{children:(0,x.jsx)("a",{href:"/login",onClick:d.ri,children:(0,x.jsxs)("button",{className:"btn",children:[(0,x.jsx)(h.A,{}),(0,x.jsx)("span",{children:"Logout"})]})})})]})})},j=e=>(0,x.jsx)("div",{className:"mx-auto AdminLayout",children:e.sidebar?(0,x.jsxs)(t.A,{className:"block md:flex mt-0",children:[(0,x.jsx)(n.A,{xs:24,lg:4,className:"hidden lg:block AdminSidebar",children:(0,x.jsx)(p,{})}),(0,x.jsx)(n.A,{xs:24,lg:20,className:"px-2 AdminRightSection",children:(0,x.jsx)("div",{className:"md:p-5",children:(0,x.jsx)("div",{className:"mx-2",children:e.children})})})]}):e.children})},77344:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var t=a(65043),n=a(59748),c=a(87021),i=a(3e3),d=a(26029),l=a(15444),o=a(1118),r=a(53707),m=a(86213),h=a(60446),u=a.n(h),x=a(86178),p=a.n(x),j=a(76068),A=a(65505),g=a(84808),v=a(93884),b=a(70579);const N=()=>{const[e,s]=(0,t.useState)([]),[a,h]=(0,t.useState)(!1),[x,N]=(0,t.useState)(!1),[k]=n.A.useForm(),[D,w]=(0,t.useState)(null);(0,t.useEffect)((()=>{y()}),[]);const y=async()=>{h(!0);try{const e=await m.A.get("".concat("https://www.spelleng.com/api","/coupons"),{headers:{authorization:"Bearer "+localStorage.getItem("token")}});s(e.data)}catch(e){console.error("Failed to fetch coupons",e)}h(!1)},C=[{title:"Code",dataIndex:"code",key:"code"},{title:"Discount (%)",dataIndex:"discount",key:"discount"},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:e=>p()(e).format("YYYY-MM-DD")},{title:"End Date",dataIndex:"endDate",key:"endDate",render:e=>p()(e).format("YYYY-MM-DD")},{title:"Actions",key:"actions",render:(e,s)=>(0,b.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[(0,b.jsx)(A.A,{onClick:()=>(e=>{w(e),k.setFieldsValue({...e,startDate:u()(e.startDate,"YYYY-MM-DD"),endDate:u()(e.endDate,"YYYY-MM-DD")}),N(!0)})(s)}),(0,b.jsx)(g.A,{onClick:()=>(async e=>{try{const s=await m.A.delete("".concat("https://www.spelleng.com/api","/coupons/delete/").concat(e),{headers:{authorization:"Bearer "+localStorage.getItem("token")}});(0,v.C9)(s.data.successMessage),y()}catch(s){console.error("Failed to fetch coupons",s)}})(null===s||void 0===s?void 0:s._id)})]})}];return(0,b.jsxs)(j.A,{sidebar:!0,children:[(0,b.jsx)("div",{className:"text-end",children:(0,b.jsx)(c.Ay,{type:"primary",onClick:()=>{w(null),k.resetFields(),N(!0)},children:"Add Coupon"})}),(0,b.jsx)(i.A,{columns:C,dataSource:e,pagination:!1,rowKey:"_id",loading:a,style:{marginTop:20}}),(0,b.jsx)(d.A,{title:D?"Edit Coupon":"Add Coupon",visible:x,onOk:async()=>{try{const e=await k.validateFields();D?await m.A.put("".concat("https://www.spelleng.com/api","/coupons/update/").concat(D._id),e,{headers:{authorization:"Bearer "+localStorage.getItem("token")}}):await m.A.post("".concat("https://www.spelleng.com/api","/coupons/create"),e,{headers:{authorization:"Bearer "+localStorage.getItem("token")}}),N(!1),y()}catch(e){console.error("Failed to save coupon",e)}},onCancel:()=>{N(!1)},children:(0,b.jsxs)(n.A,{form:k,layout:"vertical",children:[(0,b.jsx)(n.A.Item,{name:"code",label:"Coupon Code",rules:[{required:!0,message:"Please enter the coupon code"}],children:(0,b.jsx)(l.A,{className:"w-100"})}),(0,b.jsx)(n.A.Item,{name:"discount",label:"Discount (%)",rules:[{required:!0,message:"Please enter the discount percentage"}],children:(0,b.jsx)(o.A,{className:"w-100",min:1,max:100})}),(0,b.jsx)(n.A.Item,{name:"startDate",label:"Start Date",rules:[{required:!0,message:"Please select the start date"}],children:(0,b.jsx)(r.A,{className:"w-100"})}),(0,b.jsx)(n.A.Item,{name:"endDate",label:"End Date",rules:[{required:!0,message:"Please select the end date"}],children:(0,b.jsx)(r.A,{className:"w-100"})})]})})]})}}}]);
//# sourceMappingURL=7344.f7757846.chunk.js.map