"use strict";(self.webpackChunkSpellEng=self.webpackChunkSpellEng||[]).push([[5672],{93884:(e,t,a)=>{a.d(t,{$p:()=>c,C9:()=>n});var s=a(22019);const n=e=>{s.Ay.success({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})},c=e=>{s.Ay.error({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})}},58329:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(65043),n=a(86213),c=a(54522),i=a(31103),o=a(73216),l=a(86178),r=a.n(l),d=a(93884),p=a(70579);const u=()=>{(0,o.Zp)();const[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1),[u,m]=(0,s.useState)([]),[h,v]=(0,s.useState)([]),[g,x]=(0,s.useState)([]),[f,w]=(0,s.useState)([]),S=async()=>{try{var e;const a=await n.A.get("".concat("https://www.spelleng.com/api","/subscriptions/user/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});t(a.data)}catch(a){console.error("Error fetching subscriptions:",a)}};return(0,s.useEffect)((()=>{S(),(async()=>{var e;await n.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/future/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{l(!1),200===e.status?x(e.data):(0,d.$p)(e.data.errorMessage)})).catch((e=>{l(!1),console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))})(),(async()=>{var e;await n.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/past/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{l(!1),200===e.status?w(e.data):(0,d.$p)(e.data.errorMessage)})).catch((e=>{l(!1),console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))})(),(async()=>{var e;await n.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/cancelled/").concat(null===(e=(0,i.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{if(l(!1),200===e.status){var t;m(e.data);const a=r()().startOf("month").toDate(),s=r()().startOf("month").add(1,"month").toDate(),n=null===(t=e.data)||void 0===t?void 0:t.filter((e=>{const t=r()(e.date,"DD/MM/YYYY").toDate();return t>=a&&t<s}));v(n)}else(0,d.$p)(e.data.errorMessage)})).catch((e=>{l(!1),console.log(e),(0,d.$p)(null===e||void 0===e?void 0:e.message)}))})()}),[]),(0,s.useEffect)((()=>{(async()=>{const t=new Date;for(let s of e){if(new Date(s.expiryDate)<t&&"expired"!==s.status)try{await n.A.put("".concat("https://www.spelleng.com/api","/subscriptions/update-status/").concat(s._id),{status:"expired"},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{200===e.status&&S()}))}catch(a){console.error("Error updating subscription status:",a)}}})()}),[e]),(0,p.jsx)("div",{className:"subscriptions-container",children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)(c.A,{grid:{gutter:16,column:1},dataSource:e,className:"mt-5",renderItem:e=>(0,p.jsx)(c.A.Item,{children:(0,p.jsxs)("div",{className:"subscriptionsItem",children:[(0,p.jsx)("h3",{children:"Active Plan"}),(0,p.jsxs)("div",{className:"inner",children:[(0,p.jsx)("h2",{children:null===e||void 0===e?void 0:e.plan}),(0,p.jsxs)("p",{className:"mb-4",children:[(0,p.jsxs)("b",{children:[null===e||void 0===e?void 0:e.classesPerMonth," sessions"]})," per month"]}),"expired"===(null===e||void 0===e?void 0:e.status)?(0,p.jsx)("div",{className:"subsctiptionStatus expired",children:(0,p.jsxs)("p",{children:["Your subscription has been expired on ",(0,p.jsx)("b",{children:r()(e.expiryDate).format("MMMM DD, YYYY")})]})}):(0,p.jsx)("div",{className:"subsctiptionStatus",children:(0,p.jsxs)("p",{children:["Your subscription will expire on ",(0,p.jsx)("b",{children:r()(e.expiryDate).format("MMMM DD, YYYY")})]})}),(0,p.jsxs)("div",{className:"items",children:[(0,p.jsxs)("div",{className:"item",children:[(0,p.jsxs)("h5",{children:[(null===f||void 0===f?void 0:f.length)+(null===g||void 0===g?void 0:g.length),"/",null===e||void 0===e?void 0:e.classesPerMonth]}),(0,p.jsx)("p",{children:"Total sessions left"})]}),(0,p.jsxs)("div",{className:"item",children:[(0,p.jsx)("h5",{children:null===u||void 0===u?void 0:u.length}),(0,p.jsx)("p",{children:"Sessions Cancelled"})]}),(0,p.jsxs)("div",{className:"item",children:[(0,p.jsx)("h5",{children:null===h||void 0===h?void 0:h.length}),(0,p.jsx)("p",{children:"Monthly Cancelled Sessions"})]}),(0,p.jsxs)("div",{className:"item",children:[(0,p.jsx)("h5",{children:r()(e.expiryDate).format("MMMM DD, YYYY")}),(0,p.jsx)("p",{children:"Expires on"})]})]})]})]})})})})})}},12701:(e,t,a)=>{a.d(t,{Ob:()=>i,fx:()=>c,zv:()=>n});var s=a(65043);function n(e){return e&&s.isValidElement(e)&&e.type===s.Fragment}const c=(e,t,a)=>s.isValidElement(e)?s.cloneElement(e,"function"===typeof a?a(e.props||{}):a):t;function i(e,t){return c(e,e,t)}},45132:(e,t,a)=>{a.d(t,{Ay:()=>v,K6:()=>m,RQ:()=>u});var s=a(65043),n=a(98139),c=a.n(n),i=a(62149),o=a(35296),l=a(89122),r=a(78309),d=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const p=s.createContext(null),u=(e,t)=>{const a=s.useContext(p),n=s.useMemo((()=>{if(!a)return"";const{compactDirection:s,isFirstItem:n,isLastItem:i}=a,o="vertical"===s?"-vertical-":"-";return c()("".concat(e,"-compact").concat(o,"item"),{["".concat(e,"-compact").concat(o,"first-item")]:n,["".concat(e,"-compact").concat(o,"last-item")]:i,["".concat(e,"-compact").concat(o,"item-rtl")]:"rtl"===t})}),[e,t,a]);return{compactSize:null===a||void 0===a?void 0:a.compactSize,compactDirection:null===a||void 0===a?void 0:a.compactDirection,compactItemClassnames:n}},m=e=>{let{children:t}=e;return s.createElement(p.Provider,{value:null},t)},h=e=>{var{children:t}=e,a=d(e,["children"]);return s.createElement(p.Provider,{value:a},t)},v=e=>{const{getPrefixCls:t,direction:a}=s.useContext(o.QO),{size:n,direction:u,block:m,prefixCls:v,className:g,rootClassName:x,children:f}=e,w=d(e,["size","direction","block","prefixCls","className","rootClassName","children"]),S=(0,l.A)((e=>null!==n&&void 0!==n?n:e)),y=t("space-compact",v),[b,j]=(0,r.A)(y),M=c()(y,j,{["".concat(y,"-rtl")]:"rtl"===a,["".concat(y,"-block")]:m,["".concat(y,"-vertical")]:"vertical"===u},g,x),D=s.useContext(p),z=(0,i.A)(f),A=s.useMemo((()=>z.map(((e,t)=>{const a=e&&e.key||"".concat(y,"-item-").concat(t);return s.createElement(h,{key:a,compactSize:S,compactDirection:u,isFirstItem:0===t&&(!D||(null===D||void 0===D?void 0:D.isFirstItem)),isLastItem:t===z.length-1&&(!D||(null===D||void 0===D?void 0:D.isLastItem))},e)}))),[n,z,D]);return 0===z.length?null:b(s.createElement("div",Object.assign({className:M},w),A))}},78309:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(51020),n=a(78365);const c=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},i=e=>{const{componentCls:t,antCls:a}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},["".concat(t,"-item:empty")]:{display:"none"},["".concat(t,"-item > ").concat(a,"-badge-not-a-wrapper:only-child")]:{display:"block"}}}},o=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},l=(0,s.OF)("Space",(e=>{const t=(0,n.h1)(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[i(t),o(t),c(t)]}),(()=>({})),{resetStyle:!1})}}]);
//# sourceMappingURL=5672.916df241.chunk.js.map