{"version":3,"file":"static/js/818.c4cec198.chunk.js","mappings":"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","sources":["Components/Messages/messages.js","Utils/checkSubscriptionStatus.js","Pages/Students/MySubscriptions/MySubscriptions.js"],"sourcesContent":["import { message } from \"antd\";\n\nexport const SuccessAlert = (messages) => {\n    message.success({\n        className: \"ant-message\",\n        content: messages,\n        duration: 4,\n        style: { marginTop: '40px' }\n    });\n}\nexport const ErrorAlert = (messages) => {\n    message.error({\n        className: \"ant-message\",\n        content: messages,\n        duration: 4,\n        style: { marginTop: '40px' }\n    });\n\n}\nexport const WarningAlert = (messages) => {\n    message.warning({\n        className: \"ant-message\",\n        content: messages,\n        duration: 4\n    });\n}","import moment from \"moment\"\n\nexport const checkSubscriptionStatus = (date) => {\n    const expiryDate = moment(date, \"DD/MM/YYYY\");\n    const nowDate = moment();\n\n    return nowDate.isAfter(expiryDate);\n}","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { List, Typography, Button } from 'antd';\nimport './MySubscriptions.css';\nimport { isAuthenticated } from '../../../Components/Auth/auth';\nimport { useNavigate } from 'react-router-dom';\nimport moment from \"moment\"\nimport { ErrorAlert } from '../../../Components/Messages/messages';\nimport { checkSubscriptionStatus } from '../../../Utils/checkSubscriptionStatus';\n\nconst MySubscriptions = () => {\n    const router = useNavigate();\n    const [subscriptions, setSubscriptions] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [cancelledClasses, setCancelledClasses] = useState([]);\n    const [currentMonthCancelledClasses, setCurrentMonthCancelledClasses] = useState([]);\n    const [futureClasses, setFutureClasses] = useState([]);\n    const [previousClasses, setPreviousClasses] = useState([]);\n\n    const getCancelledClasses = async () => {\n        await axios.get(`${process.env.REACT_APP_BACKEND_URL}/scheduled-classes/student/cancelled/${isAuthenticated()?._id}`, {\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            }\n        }).then(res => {\n            setLoading(false);\n            if (res.status === 200) {\n                setCancelledClasses(res.data);\n                const currentMonthStart = moment().startOf('month').toDate();\n                const nextMonthStart = moment().startOf('month').add(1, 'month').toDate();\n                const studentCurrentMonthClasses = res.data?.filter(scheduledClass => {\n                    const classDate = moment(scheduledClass.date, \"DD/MM/YYYY\").toDate();\n                    return classDate >= currentMonthStart && classDate < nextMonthStart;\n                });\n                setCurrentMonthCancelledClasses(studentCurrentMonthClasses);\n            } else {\n                ErrorAlert(res.data.errorMessage);\n            }\n        }).catch(err => {\n            setLoading(false);\n            console.log(err)\n            ErrorAlert(err?.message);\n        })\n    }\n\n    const getFutureClasses = async () => {\n        await axios.get(`${process.env.REACT_APP_BACKEND_URL}/scheduled-classes/student/future/${isAuthenticated()?._id}`, {\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            }\n        }).then(res => {\n            setLoading(false);\n            if (res.status === 200) {\n                setFutureClasses(res.data?.filter(f => !f?.trialClass));\n            } else {\n                ErrorAlert(res.data.errorMessage);\n            }\n        }).catch(err => {\n            setLoading(false);\n            console.log(err)\n            ErrorAlert(err?.message);\n        })\n    }\n\n    const getPreviousClasses = async () => {\n        await axios.get(`${process.env.REACT_APP_BACKEND_URL}/scheduled-classes/student/past/${isAuthenticated()?._id}`, {\n            headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            }\n        }).then(res => {\n            setLoading(false);\n            if (res.status === 200) {\n                setPreviousClasses(res.data?.filter(f => !f?.trialClass));\n            } else {\n                ErrorAlert(res.data.errorMessage);\n            }\n        }).catch(err => {\n            setLoading(false);\n            console.log(err)\n            ErrorAlert(err?.message);\n        })\n    }\n\n\n    const fetchSubscriptions = async () => {\n        try {\n            const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/subscriptions/user/${isAuthenticated()?._id}`, {\n                headers: {\n                    Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n                }\n            });\n            setSubscriptions(response.data);\n        } catch (error) {\n            console.error('Error fetching subscriptions:', error);\n        }\n    };\n\n    useEffect(() => {\n        fetchSubscriptions();\n        getFutureClasses();\n        getPreviousClasses();\n        getCancelledClasses();\n    }, []);\n\n    return (\n        <div className=\"subscriptions-container\">\n            <div className=\"container\">\n                <div className='text-center mt-4'>\n                    <h4>Buy Subscription</h4>\n                    <Button className='btn h-auto py-2 px-5 mt-3' type='primary' onClick={() => router(\"/subscription\")}>Buy Now</Button>\n                </div>\n                <List\n                    grid={{ gutter: 16, column: 1 }}\n                    dataSource={subscriptions}\n                    className=\"mt-2\"\n                    renderItem={subscription => (\n                        <List.Item>\n                            <div className='subscriptionsItem'>\n                                <h3>Active Plan</h3>\n                                <div className='inner'>\n                                    <h2>{subscription?.plan}</h2>\n                                    <p className='mb-4'><b>{subscription?.classesPerMonth} sessions</b> per month</p>\n                                    {\n                                        checkSubscriptionStatus(subscription?.expiryDate) ?\n                                            <div className='subsctiptionStatus expired'>\n                                                <p>Your subscription has been expired on <b>{moment(subscription.expiryDate, \"DD/MM/YYYY\").format(\"MMMM DD, YYYY\")}</b></p>\n                                            </div>\n                                            :\n                                            <div className='subsctiptionStatus'>\n                                                <p>Your subscription will expire on <b>{moment(subscription.expiryDate, \"DD/MM/YYYY\").format(\"MMMM DD, YYYY\")}</b></p>\n                                            </div>\n                                    }\n                                    <div className='items'>\n                                        <div className='item'>\n                                            <h5>{previousClasses?.length + futureClasses?.length}/{subscription?.totalClasses}</h5>\n                                            <p>Total sessions left</p>\n                                        </div>\n                                        <div className='item'>\n                                            <h5>{cancelledClasses?.length}</h5>\n                                            <p>Sessions Cancelled</p>\n                                        </div>\n                                        <div className='item'>\n                                            <h5>{currentMonthCancelledClasses?.length}</h5>\n                                            <p>Monthly Cancelled Sessions</p>\n                                        </div>\n                                        <div className='item'>\n                                            <h5>{moment(subscription.expiryDate, \"DD/MM/YYYY\").format(\"MMMM DD, YYYY\")}</h5>\n                                            <p>{checkSubscriptionStatus(subscription?.expiryDate) ? \"Expired\" : \"Expires\"} on</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </List.Item>\n                    )}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default MySubscriptions;\n"],"names":["SuccessAlert","messages","message","success","className","content","duration","style","marginTop","ErrorAlert","error","checkSubscriptionStatus","date","expiryDate","moment","isAfter","MySubscriptions","router","useNavigate","subscriptions","setSubscriptions","useState","loading","setLoading","cancelledClasses","setCancelledClasses","currentMonthCancelledClasses","setCurrentMonthCancelledClasses","futureClasses","setFutureClasses","previousClasses","setPreviousClasses","useEffect","async","_isAuthenticated4","response","axios","get","concat","process","isAuthenticated","_id","headers","Authorization","localStorage","getItem","data","console","fetchSubscriptions","_isAuthenticated2","then","res","_res$data2","status","filter","f","trialClass","errorMessage","catch","err","log","getFutureClasses","_isAuthenticated3","_res$data3","getPreviousClasses","_isAuthenticated","_res$data","currentMonthStart","startOf","toDate","nextMonthStart","add","studentCurrentMonthClasses","scheduledClass","classDate","getCancelledClasses","_jsx","children","_jsxs","Button","type","onClick","List","grid","gutter","column","dataSource","renderItem","subscription","Item","plan","classesPerMonth","format","length","totalClasses"],"sourceRoot":""}