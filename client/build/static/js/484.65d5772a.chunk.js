"use strict";(self.webpackChunkSpellEng=self.webpackChunkSpellEng||[]).push([[484],{55755:(e,s,n)=>{n.d(s,{A:()=>a});n(65043);var t=n(70579);const a=()=>(0,t.jsx)(t.Fragment,{children:"\u20b9"})},93884:(e,s,n)=>{n.d(s,{$p:()=>c,C9:()=>a});var t=n(22019);const a=e=>{t.Ay.success({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})},c=e=>{t.Ay.error({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})}},56391:(e,s,n)=>{n.r(s),n.d(s,{default:()=>y});var t=n(65043),a=n(94434),c=n(82639);const i=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-IN",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INR";return new Intl.NumberFormat(s,{currency:n,minimumFractionDigits:0,maximumFractionDigits:0}).format(e)};var l=n(55755),r=n(70579);const o=e=>{let{plan:s,selectedClasses:n,selectedPlan:t,setSelectedPlan:a}=e;const c=s.classes.find((e=>e.count===n)).price;return(0,r.jsxs)("div",{className:"planContainer ".concat(t===s.duration&&"selected"),onClick:()=>a(s.duration),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h6",{children:s.duration}),(0,r.jsxs)("p",{children:["No. of classes: ",(0,r.jsx)("b",{children:n*parseInt(s.duration)})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("h4",{children:[(0,r.jsx)(l.A,{}),i(c/parseInt(s.duration))," ",(0,r.jsx)("small",{children:"/mo"})]})})]})};var d=n(15444);const u=n.p+"static/media/razorpay.10b8c74f8ea1690b0808.png";var h=n(86213),p=n(73216),m=n(93884),x=n(31103),j=n(87021);const v=e=>{let{studentId:s,plan:n,amount:t,classesPerMonth:a,btnText:c}=e;const i=(0,p.Zp)();return(0,r.jsx)(j.Ay,{className:"btn h-auto w-100 py-2 rounded-2 payBtn",onClick:async()=>{if((0,x.wR)()){const e=await h.A.post("".concat("https://www.spelleng.com/api","/subscriptions/create-order"),{amount:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).catch((e=>{console.log(e)})),{id:c}=e.data,l={key:"rzp_test_V2ixbI12n2K74v",amount:t,currency:"INR",name:"SpellEng Subscription",description:"Subscription Payment",order_id:c,handler:async function(e){try{var c,l;await h.A.post("".concat("https://www.spelleng.com/api","/subscriptions/create-subscription"),{studentId:s,plan:n,name:null===(c=(0,x.wR)())||void 0===c?void 0:c.fullName,email:null===(l=(0,x.wR)())||void 0===l?void 0:l.email,classesPerMonth:a,razorpayPaymentId:e.razorpay_payment_id,amount:t},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),(0,m.C9)("Subscription created and activated successfully"),i("/student/subscriptions")}catch(r){console.error(r),(0,m.$p)("Failed to create subscription")}},theme:{color:"#F37254"}};new window.Razorpay(l).open()}else(0,m.$p)("Please login first to buy plans")},children:c})},{Search:g}=d.A,b=e=>{var s;let{selectedPlan:n,selectedClasses:a,pricingPlans:c}=e;const o=c.find((e=>e.duration===n)),[d,p]=(0,t.useState)(""),[j,b]=(0,t.useState)(0);if(!o)return null;const y=o.classes.find((e=>e.count===a)).price,N=o.discount?y*o.discount/100:0,C=j?y*j/100:0,w=y-N;return(0,r.jsxs)("div",{className:"billContainer",children:[(0,r.jsx)("h4",{children:"Bill Summary"}),(0,r.jsxs)("div",{className:"item",children:[(0,r.jsx)("h6",{children:"Base Price:"}),(0,r.jsxs)("h6",{children:[(0,r.jsx)(l.A,{}),i(y)]})]}),N>0&&(0,r.jsxs)("div",{className:"item discount",children:[(0,r.jsxs)("h6",{children:["Discount (",o.discount,"%):"]}),(0,r.jsxs)("h6",{children:["-",(0,r.jsx)(l.A,{}),i(N)]})]}),C>0&&(0,r.jsxs)("div",{className:"item discount",children:[(0,r.jsxs)("h6",{children:["Coupon Discount (",j,"%):"]}),(0,r.jsxs)("h6",{children:["-",(0,r.jsx)(l.A,{}),i(C)]})]}),(0,r.jsxs)("div",{className:"item",children:[(0,r.jsx)("h6",{children:"Net Price:"}),(0,r.jsxs)("h6",{children:[(0,r.jsx)(l.A,{}),i(w-C)]})]}),(0,r.jsxs)("div",{className:"item couponContainer",children:[(0,r.jsx)("h6",{children:"Have a discount coupon?"}),(0,r.jsx)("div",{children:(0,r.jsx)(g,{placeholder:"Enter coupon code",value:d,allowClear:!0,onChange:e=>p(e.target.value),onSearch:async()=>{try{const e=await h.A.post("".concat("https://www.spelleng.com/api","/coupons/validate"),{code:d},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});200===e.status&&(b(e.data.discount),(0,m.C9)("Coupon applied! Discount: ".concat(e.data.discount,"%")))}catch(e){(0,m.$p)(e.response.data.message)}},enterButton:"Apply"})})]}),(0,r.jsxs)("div",{className:"item mt-5",children:[(0,r.jsx)("h6",{children:(0,r.jsx)("b",{children:"Pay Now"})}),(0,r.jsx)("h6",{children:(0,r.jsxs)("b",{children:[(0,r.jsx)(l.A,{}),i(w-C)]})})]}),(0,r.jsx)("div",{className:"item mt-0 mb-4",children:(0,r.jsx)("button",{className:"btn",children:(0,r.jsx)("img",{src:u,alt:"Razorpay",style:{width:"100px"}})})}),(0,r.jsx)(v,{btnText:(0,r.jsxs)("div",{children:["Pay \xa0 ",(0,r.jsx)(l.A,{}),i(w-C)]}),classesPerMonth:a,studentId:null===(s=(0,x.wR)())||void 0===s?void 0:s._id,plan:n,amount:w-C})]})},y=()=>{var e;const[s,n]=(0,t.useState)(12),[i,l]=(0,t.useState)("3 Month"),d=[{duration:"1 Month",classes:[{count:12,price:6700},{count:20,price:8500}]},{duration:"3 Months",classes:[{count:12,price:16e3},{count:20,price:2e4}],discount:19},{duration:"6 Months",classes:[{count:12,price:3e4},{count:20,price:35e3}],discount:24}];return console.log(i),(0,r.jsx)("div",{className:"Subscription",children:(0,r.jsxs)("div",{className:"inner container",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-center",children:"Choose a plan that suits your need"}),(0,r.jsx)("div",{className:"features",children:(0,r.jsx)("ul",{children:null===(e=["1-1 Live Class","".concat(s," Classes Per Month"),"30 Minutes Per Class","Class Recording","Expert Feedback","Flexible Timing"])||void 0===e?void 0:e.map(((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)(c.q1R,{})," ",e]},s)))})})]}),(0,r.jsxs)("div",{className:"subscriptionContainer",children:[(0,r.jsxs)("div",{className:"subscriptionPlanContainer",children:[(0,r.jsxs)("div",{className:"classesBtns",children:[(0,r.jsx)("h6",{children:"Select No. of classes"}),(0,r.jsx)(a.A,{defaultValue:12,className:"classesSelect",onChange:e=>n(e),options:[{value:12,label:"12 Classes per month"},{value:20,label:"20 Classes per month"}]})]}),d.reverse().map((e=>(0,r.jsx)(o,{plan:e,selectedClasses:s,selectedPlan:i,setSelectedPlan:l},e.duration)))]}),(0,r.jsx)(b,{selectedPlan:i,selectedClasses:s,pricingPlans:d})]})]})})}}}]);
//# sourceMappingURL=484.65d5772a.chunk.js.map