"use strict";(self.webpackChunkspelleng=self.webpackChunkspelleng||[]).push([[818],{93884:(e,s,t)=>{t.d(s,{$p:()=>l,C9:()=>i});var a=t(22019);const i=e=>{a.Ay.success({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})},l=e=>{a.Ay.error({className:"ant-message",content:e,duration:4,style:{marginTop:"40px"}})}},20818:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(65043),i=t(86213),l=t(87021),n=t(54522),o=t(31103),r=t(73216),c=t(86178),d=t.n(c),h=t(93884);const u=e=>{const s=d()(e,"DD/MM/YYYY");return d()().isAfter(s)};var p=t(70579);const v=()=>{const e=(0,r.Zp)(),[s,t]=(0,a.useState)([]),[c,v]=(0,a.useState)(!1),[m,x]=(0,a.useState)([]),[g,Y]=(0,a.useState)([]),[j,M]=(0,a.useState)([]),[w,D]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{try{var e;const s=await i.A.get("".concat("https://www.spelleng.com/api","/subscriptions/user/").concat(null===(e=(0,o.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});t(s.data)}catch(s){console.error("Error fetching subscriptions:",s)}})(),(async()=>{var e;await i.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/future/").concat(null===(e=(0,o.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{var s;v(!1),200===e.status?M(null===(s=e.data)||void 0===s?void 0:s.filter((e=>!(null!==e&&void 0!==e&&e.trialClass)))):(0,h.$p)(e.data.errorMessage)})).catch((e=>{v(!1),console.log(e),(0,h.$p)(null===e||void 0===e?void 0:e.message)}))})(),(async()=>{var e;await i.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/past/").concat(null===(e=(0,o.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{var s;v(!1),200===e.status?D(null===(s=e.data)||void 0===s?void 0:s.filter((e=>!(null!==e&&void 0!==e&&e.trialClass)))):(0,h.$p)(e.data.errorMessage)})).catch((e=>{v(!1),console.log(e),(0,h.$p)(null===e||void 0===e?void 0:e.message)}))})(),(async()=>{var e;await i.A.get("".concat("https://www.spelleng.com/api","/scheduled-classes/student/cancelled/").concat(null===(e=(0,o.wR)())||void 0===e?void 0:e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{if(v(!1),200===e.status){var s;x(e.data);const t=d()().startOf("month").toDate(),a=d()().startOf("month").add(1,"month").toDate(),i=null===(s=e.data)||void 0===s?void 0:s.filter((e=>{const s=d()(e.date,"DD/MM/YYYY").toDate();return s>=t&&s<a}));Y(i)}else(0,h.$p)(e.data.errorMessage)})).catch((e=>{v(!1),console.log(e),(0,h.$p)(null===e||void 0===e?void 0:e.message)}))})()}),[]),(0,p.jsx)("div",{className:"subscriptions-container",children:(0,p.jsxs)("div",{className:"container",children:[(0,p.jsxs)("div",{className:"text-center mt-4",children:[(0,p.jsx)("h4",{children:"Buy Subscription"}),(0,p.jsx)(l.Ay,{className:"btn h-auto py-2 px-5 mt-3",type:"primary",onClick:()=>e("/subscription"),children:"Buy Now"})]}),(0,p.jsx)(n.A,{grid:{gutter:16,column:1},dataSource:s,className:"mt-2",renderItem:e=>(0,p.jsx)(n.A.Item,{children:(0,p.jsxs)("div",{className:"subscriptionsItem",children:[(0,p.jsx)("h3",{children:"Active Plan"}),(0,p.jsxs)("div",{className:"inner",children:[(0,p.jsx)("h2",{children:null===e||void 0===e?void 0:e.plan}),(0,p.jsxs)("p",{className:"mb-4",children:[(0,p.jsxs)("b",{children:[null===e||void 0===e?void 0:e.classesPerMonth," sessions"]})," per month"]}),u(null===e||void 0===e?void 0:e.expiryDate)?(0,p.jsx)("div",{className:"subsctiptionStatus expired",children:(0,p.jsxs)("p",{children:["Your subscription has been expired on ",(0,p.jsx)("b",{children:d()(e.expiryDate,"DD/MM/YYYY").format("MMMM DD, YYYY")})]})}):(0,p.jsx)("div",{className:"subsctiptionStatus",children:(0,p.jsxs)("p",{children:["Your subscription will expire on ",(0,p.jsx)("b",{children:d()(e.expiryDate,"DD/MM/YYYY").format("MMMM DD, YYYY")})]})}),(0,p.jsxs)("div",{className:"items",children:[(0,p.jsxs)("div",{className:"item",children:[(0,p.jsxs)("h5",{children:[(null===w||void 0===w?void 0:w.length)+(null===j||void 0===j?void 0:j.length),"/",null===e||void 0===e?void 0:e.totalClasses]}),(0,p.jsx)("p",{children:"Total sessions left"})]}),(0,p.jsxs)("div",{className:"item",children:[(0,p.jsx)("h5",{children:null===m||void 0===m?void 0:m.length}),(0,p.jsx)("p",{children:"Sessions Cancelled"})]}),(0,p.jsxs)("div",{className:"item",children:[(0,p.jsx)("h5",{children:null===g||void 0===g?void 0:g.length}),(0,p.jsx)("p",{children:"Monthly Cancelled Sessions"})]}),(0,p.jsxs)("div",{className:"item",children:[(0,p.jsx)("h5",{children:d()(e.expiryDate,"DD/MM/YYYY").format("MMMM DD, YYYY")}),(0,p.jsxs)("p",{children:[u(null===e||void 0===e?void 0:e.expiryDate)?"Expired":"Expires"," on"]})]})]})]})]})})})]})})}}}]);
//# sourceMappingURL=818.c4cec198.chunk.js.map